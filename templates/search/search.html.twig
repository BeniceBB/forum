<div id="search">
    {{ form_start(searchForm, {'attr': {'id': 'searchForm'}}) }}
    <div class="form-group">
        {{ form_widget(searchForm.search) }}
    </div>
    <div class="form-group">
        <label>{% trans %}label.search_in{% endtrans %}:</label>
        {{ form_widget(searchForm.type) }}
    </div>
    <div class="form-group">
        <label>{% trans %}label.amountfilter{% endtrans %}</label>
        {{ form_widget(searchForm.postsPerPage) }}
    </div>

    <button type="submit" class="btn btn-dark">{% trans %}form.search{% endtrans %}</button>
    {{ form_end(searchForm) }}


    <a href="#" id="prev" data-page="" class="hidden">prev</a>
    <a href="#" id="next" data-page="1">next</a>

</div>
<style>
    .hidden {
        display: none;
    }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $('#searchForm').submit(function (e) {
            e.preventDefault();
            var form = new FormData(this);
            $.ajax({
                type: 'POST',
                url: '/search',
                data: form,
                processData: false,
                contentType: false,
            }).done(function (data) {
                $('#blogtable').html(data.result);

            }).fail(function (data) {
            });
        });

        function showAndHideButtons(data) {
            let prevPage = data.page - 1;
            console.log(data.page);
            if (prevPage < 0) {
                prevPage = 0;
            }
            $('#prev').data('page', prevPage);
            $('#next').data('page', data.page + 1);
        }

        $('#prev').click(function (e) {
            e.preventDefault();
            var form = new FormData($('#searchForm')[0]);
            var page = $('#prev').data('page');
            $.ajax({
                type: 'POST',
                url: '/search/' + page,
                data: form,
                processData: false,
                contentType: false,
            }).done(function (data) {
                $('#blogtable').html(data.result);
                if (data.numberOfBlogs > 0) {
                    $('#prev').show();
                }
                if (data.numberOfBlogs < 0)
                {
                    $('#next').show();
                }
                showAndHideButtons(data);



            }).fail(function (data) {
            });
        });

        $('#next').click(function (e) {
            e.preventDefault();
            var form = new FormData($('#searchForm')[0]);
            var page = $('#next').data('page');
            $.ajax({
                type: 'POST',
                url: '/search/' + page,
                data: form,
                processData: false,
                contentType: false,
            }).done(function (data) {
                $('#blogtable').html(data.result);
                if (data.numberOfBlogs < data.numberOfBlogsPerPage) {
                    $('#next').hide();
                }

                $('#prev').show();
                showAndHideButtons(data);

            }).fail(function (data) {
            });
        });



        });
</script>